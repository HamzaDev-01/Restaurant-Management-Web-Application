<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="sidebar">
        <div class="logo-details">
            <div class="logo_name">Spice Bites</div>
        </div>
        <ul class="nav-list">
            <li>
                <a href="javascript:void(0)" class="menu-item" data-target="dashboard">
                    <i class='bx bx-grid-alt'></i>
                    <span class="links_name">Admin Dashboard</span>
                </a>
                <span class="tooltip">Admin Dashboard</span>
            </li>
            <li>
                <a href="javascript:void(0)" class="menu-item" data-target="home">
                    <i class='bx bx-home'></i>
                    <span class="links_name">Home</span>
                </a>
                <span class="tooltip">Home</span>
            </li>
            <li>
                <a href="javascript:void(0)" class="menu-item" data-target="contact">
                    <i class='bx bx-chat'></i>
                    <span class="links_name">Contact Us</span>
                </a>
                <span class="tooltip">Contact Us</span>
            </li>
            <li>
                <a href="javascript:void(0)" class="menu-item" data-target="order">
                    <i class='bx bx-cart-alt'></i>
                    <span class="links_name">Order</span>
                </a>
                <span class="tooltip">Order</span>
            </li>
            <li>
                <a href="javascript:void(0)" class="menu-item" data-target="about-us">
                    <i class='bx bx-info-circle'></i>
                    <span class="links_name">About Us</span>
                </a>
                <span class="tooltip">About Us</span>
            </li>
            <li class="profile">
                <i class='bx bx-log-out' id="log_out"></i>
            </li>
        </ul>
    </div>
    <section id="home" class="home-section content-section">
        <div class="video-container">
            <video autoplay muted loop id="myVideo">
                <source src="pro-vid.mp4" type="video/mp4">
            </video>
            
            <div class="overlay-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 2rem; font-weight: bold; text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);">
                <h1 style="font-size: 4rem; margin-bottom: 15px; font-weight: 700; text-transform: uppercase;">Welcome to Spice Bites!</h1>
            <p style="font-size: 1.5rem; margin-bottom: 20px;">Delicious food. Perfect moments. Every bite.</p>
            </div>
        </div>
    </section>
    

        <!-- Contact Us Section -->
        <div id="contact" class="content-section" style="display: none; font-family: 'Poppins', 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333; background: #f0f4f7; padding: 60px 30px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); max-width: 980px; margin: 60px auto; line-height: 1.7;">
            <h2 class="section-title" style="font-size: 48px; color: #ff6f61; margin-bottom: 30px; text-align: center; text-transform: uppercase; font-weight: 700; letter-spacing: 2px; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);">
                Contact Us
            </h2>
            <p style="font-size: 20px; color: #555; text-align: center; margin-bottom: 30px; font-weight: 300; line-height: 1.7;">
                We'd Love to Hear From You!
            </p>
            <p style="font-size: 20px; color: #555; text-align: center; margin-bottom: 30px; font-weight: 300; line-height: 1.7;">
                For inquiries, call: <strong>(123) 456-7890</strong>
            </p>
            
            <h3 style="font-size: 36px; color: #ff6f61; margin-bottom: 18px; font-weight: 600; text-transform: capitalize; border-bottom: 3px solid #ff6f61; padding-bottom: 5px; letter-spacing: 0.5px;">
                Our Location
            </h3>
            <p style="font-size: 18px; color: #555; margin-bottom: 40px;">
                <strong>Spice Bites</strong><br>
                123 Main Street<br>
                City, State, 12345
            </p>
        
            <h3 style="font-size: 36px; color: #ff6f61; margin-bottom: 18px; font-weight: 600; text-transform: capitalize; border-bottom: 3px solid #ff6f61; padding-bottom: 5px; letter-spacing: 0.5px;">
                Phone
            </h3>
            <p style="font-size: 18px; color: #555; margin-bottom: 40px;">
                For reservations, inquiries, or to speak with our team, call us at: <strong>(123) 456-7890</strong>
            </p>
            
            <h3 style="font-size: 36px; color: #ff6f61; margin-bottom: 18px; font-weight: 600; text-transform: capitalize; border-bottom: 3px solid #ff6f61; padding-bottom: 5px; letter-spacing: 0.5px;">
                Email
            </h3>
            <p style="font-size: 18px; color: #555; margin-bottom: 40px;">
                Have a specific question or request? Email us at: <strong>info@spicebites.com</strong>
            </p>
        
            <h3 style="font-size: 36px; color: #ff6f61; margin-bottom: 18px; font-weight: 600; text-transform: capitalize; border-bottom: 3px solid #ff6f61; padding-bottom: 5px; letter-spacing: 0.5px;">
                Opening Hours
            </h3>
            <ul style="font-size: 18px; color: #555; margin-bottom: 40px; list-style-type: none; padding-left: 0;">
                <li style="margin-bottom: 10px;">Monday to Friday: 9:00 AM - 9:00 PM</li>
                <li style="margin-bottom: 10px;">Saturday & Sunday: 10:00 AM - 10:00 PM</li>
            </ul>
        
            <h3 style="font-size: 36px; color: #ff6f61; margin-bottom: 18px; font-weight: 600; text-transform: capitalize; border-bottom: 3px solid #ff6f61; padding-bottom: 5px; letter-spacing: 0.5px;">
                Follow Us
            </h3>
            <ul class="social-media" style="font-size: 18px; color: #555; margin-bottom: 40px; list-style-type: none; padding-left: 0; text-align: center;">
                <li style="display: inline-block; margin: 0 15px;">
                    <a href="https://www.facebook.com" target="_blank" style="display: block; width: 60px; height: 60px; background-color: #3b5998; border-radius: 50%; text-align: center; line-height: 60px; color: #fff; font-size: 28px; text-decoration: none; transition: transform 0.3s, background-color 0.3s;">
                        <i class="fab fa-facebook-f" style="font-size: 32px; vertical-align: middle;"></i>
                    </a>
                </li>
                <li style="display: inline-block; margin: 0 15px;">
                    <a href="https://www.instagram.com" target="_blank" style="display: block; width: 60px; height: 60px; background-color: #E4405F; border-radius: 50%; text-align: center; line-height: 60px; color: #fff; font-size: 28px; text-decoration: none; transition: transform 0.3s, background-color 0.3s;">
                        <i class="fab fa-instagram" style="font-size: 32px; vertical-align: middle;"></i>
                    </a>
                </li>
                <li style="display: inline-block; margin: 0 15px;">
                    <a href="https://www.twitter.com" target="_blank" style="display: block; width: 60px; height: 60px; background-color: #1DA1F2; border-radius: 50%; text-align: center; line-height: 60px; color: #fff; font-size: 28px; text-decoration: none; transition: transform 0.3s, background-color 0.3s;">
                        <i class="fab fa-twitter" style="font-size: 32px; vertical-align: middle;"></i>
                    </a>
                </li>
            </ul>
            
        </div>
        

        <!-- Order Section -->
        <div id="order" class="content-section" style="padding: 30px; font-family: 'Arial', sans-serif; margin-left: 140px; z-index: 1;">
            <h2 class="section-title" style="font-size: 2.5rem; font-weight: bold; margin-bottom: 20px; color: #2d2d2d;">Order</h2>
            <p style="font-size: 1.2rem; color: #555; margin-bottom: 40px;">Place your orders here! Browse our delicious menu and enjoy a great meal. You can add your favorite items to your cart.</p>
            
            <!-- Menu Cards Container with Scroll Arrows -->
            <div style="position: relative;">
                <button class="scroll-arrow left" id="leftArrow" onclick="scrollMenu('left')" style="position: absolute; top: 50%; left: 0; z-index: 2; background: rgba(0, 0, 0, 0.3); color: white; border: none; padding: 10px; cursor: pointer; border-radius: 50%; font-size: 20px;">&#8592;</button>
                <div class="menu-slider" id="menuContainer" style="display: flex; overflow-x: auto; scroll-behavior: smooth; gap: 20px; padding-bottom: 10px;">
                    <!-- Menu items will be dynamically added from PHP -->
                </div>
                <button class="scroll-arrow right" id="rightArrow" onclick="scrollMenu('right')" style="position: absolute; top: 50%; right: 0; z-index: 2; background: rgba(0, 0, 0, 0.3); color: white; border: none; padding: 10px; cursor: pointer; border-radius: 50%; font-size: 20px;">&#8594;</button>
            </div>
        
            <!-- Cart Summary Section -->
            <form id="orderForm" method="POST" action="save_order.php" style="margin-top: 40px; padding: 20px; background-color: #f7f7f7; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
                <h3 style="font-size: 1.8rem; font-weight: bold; color: #333;">Your Cart</h3>

                <!-- Customer Name Input -->
                <label for="customerName" style="font-size: 1.2rem; color: #555; display: block; margin-bottom: 10px;">Customer Name:</label>
                <input type="text" id="customerName" name="customerName" placeholder="Enter your name" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;" oninput="saveCustomerName()">

                <!-- Customer Email Input -->
                <label for="customerEmail" style="font-size: 1.2rem; color: #555; display: block; margin-bottom: 10px;">Email:</label>
                <input type="email" id="customerEmail" name="customerEmail" placeholder="Enter your email" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;" oninput="saveCustomerEmail()">

                <!-- Customer Address Input -->
                <label for="customerAddress" style="font-size: 1.2rem; color: #555; display: block; margin-bottom: 10px;">Address:</label>
                <textarea id="customerAddress" name="customerAddress" placeholder="Enter your delivery address" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px; min-height: 80px; resize: vertical;" oninput="saveCustomerAddress()"></textarea>

                <!-- Customer Phone Number Input -->
                <label for="customerPhone" style="font-size: 1.2rem; color: #555; display: block; margin-bottom: 10px;">Phone Number:</label>
                <input type="tel" id="customerPhone" name="customerPhone" placeholder="Enter your phone number" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;" oninput="saveCustomerPhone()">

                <!-- Cart Items -->
                <div id="cartItems" style="margin-top: 20px;"></div>

                <!-- Cart Total -->
                <div id="cartTotal" style="font-size: 1.5rem; font-weight: bold; color: #333; margin-top: 15px;">Total: $0.00</div>

                <div id="hiddenCartInputs"></div>

                <button type="submit" style="background: #FF5733; color: white; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; width: 100%;">Place Order</button>
            </form>
        </div>
        
        <script>
            // Initialize page when DOM is ready
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize customer fields from localStorage
                customerName = localStorage.getItem('customerName') || '';
                const nameInput = document.getElementById('customerName');
                if (nameInput) {
                    nameInput.value = customerName;
                }

                const emailInput = document.getElementById('customerEmail');
                if (emailInput) {
                    emailInput.value = localStorage.getItem('customerEmail') || '';
                }

                const addressInput = document.getElementById('customerAddress');
                if (addressInput) {
                    addressInput.value = localStorage.getItem('customerAddress') || '';
                }

                const phoneInput = document.getElementById('customerPhone');
                if (phoneInput) {
                    phoneInput.value = localStorage.getItem('customerPhone') || '';
                }

                // Fetch menu items and add them into the page
                fetch('fetch_menu.php')
                    .then(response => response.text())
                    .then(data => {
                        const menuContainer = document.getElementById('menuContainer');
                        menuContainer.innerHTML = data;
                        adjustScrollArrows();
                    })
                    .catch(error => {
                        console.error('Error fetching menu data:', error);
                    });

                // Setup form submission
                const orderForm = document.getElementById('orderForm');
                if (orderForm) {
                    orderForm.addEventListener('submit', function (event) {
                        const hiddenCartInputs = document.getElementById('hiddenCartInputs');
                        hiddenCartInputs.innerHTML = '';

                        cart.forEach((item, index) => {
                            const nameInput = document.createElement('input');
                            nameInput.type = 'hidden';
                            nameInput.name = `cart[${index}][name]`;
                            nameInput.value = item.name;
                            hiddenCartInputs.appendChild(nameInput);

                            const priceInput = document.createElement('input');
                            priceInput.type = 'hidden';
                            priceInput.name = `cart[${index}][price]`;
                            priceInput.value = item.price;
                            hiddenCartInputs.appendChild(priceInput);

                            const quantityInput = document.createElement('input');
                            quantityInput.type = 'hidden';
                            quantityInput.name = `cart[${index}][quantity]`;
                            quantityInput.value = item.quantity;
                            hiddenCartInputs.appendChild(quantityInput);
                        });

                        // After order is placed, clear localStorage and reset the form
                        setTimeout(() => {
                            // Clear the cart and customer info from localStorage
                            localStorage.removeItem('cart');
                            localStorage.removeItem('customerName');
                            localStorage.removeItem('customerEmail');
                            localStorage.removeItem('customerAddress');
                            localStorage.removeItem('customerPhone');

                            // Reset the cart display and customer input fields
                            cart = [];
                            document.getElementById('customerName').value = '';
                            document.getElementById('customerEmail').value = '';
                            document.getElementById('customerAddress').value = '';
                            document.getElementById('customerPhone').value = '';
                            updateCart();
                        }, 500);
                    });
                }
            });

            // Function to scroll the menu container left or right
            function scrollMenu(direction) {
                const menuContainer = document.getElementById('menuContainer');
                if (direction === 'left') {
                    menuContainer.scrollBy({ left: -200, behavior: 'smooth' });
                } else {
                    menuContainer.scrollBy({ left: 200, behavior: 'smooth' });
                }
            }

            // Function to adjust visibility of scroll arrows
            function adjustScrollArrows() {
                const menuContainer = document.getElementById('menuContainer');
                const leftArrow = document.getElementById('leftArrow');
                const rightArrow = document.getElementById('rightArrow');
                
                if (menuContainer.scrollWidth > menuContainer.clientWidth) {
                    leftArrow.style.display = 'block';
                    rightArrow.style.display = 'block';
                } else {
                    leftArrow.style.display = 'none';
                    rightArrow.style.display = 'none';
                }
            }

        </script>

        <!-- About Us Section -->
        <div id="about-us" class="content-section" style="display: none; font-family: 'Poppins', 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333; background: linear-gradient(145deg, #f7f7f7, #ffffff); padding: 60px 40px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); max-width: 960px; margin: 60px auto; line-height: 1.8; text-align: center;">
    
            <h2 class="section-title" style="font-size: 48px; color: #ff6f61; margin-bottom: 35px; text-transform: uppercase; font-weight: 700; letter-spacing: 2px; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);">
                About Us
            </h2>
            <p style="font-size: 20px; text-align: center; margin-bottom: 50px; font-weight: 300; color: #555; line-height: 1.7;">
                Welcome to Spice Bites, where bold flavors meet unforgettable dining experiences. Established in 2024, we are passionate about delivering exceptional food and service in a warm, inviting atmosphere. Come discover why we're the heart of the community.
            </p>
        
            <h3 style="font-size: 40px; color: #ff6f61; margin-bottom: 25px; font-weight: 600; text-transform: capitalize; border-bottom: 4px solid #ff6f61; padding-bottom: 10px; letter-spacing: 0.5px;">
                Our Story
            </h3>
            <p style="font-size: 18px; margin-bottom: 40px; color: #555; line-height: 1.7;">
                Spice Bites was born from the vision of Admin, who sought to create a space where both traditional and contemporary flavors could flourish. From humble beginnings to a beloved community gathering spot, we are proud to share our journey with you.
            </p>
        
            <h3 style="font-size: 40px; color: #ff6f61; margin-bottom: 25px; font-weight: 600; text-transform: capitalize; border-bottom: 4px solid #ff6f61; padding-bottom: 10px; letter-spacing: 0.5px;">
                Our Values
            </h3>
            <p style="font-size: 18px; margin-bottom: 40px; color: #555; line-height: 1.7;">
                We believe in supporting sustainable practices and sourcing only the freshest ingredients. At Spice Bites, we are committed to creating a memorable experience for each guest with warm hospitality, quality food, and a welcoming ambiance.
            </p>
        
            <h3 style="font-size: 40px; color: #ff6f61; margin-bottom: 25px; font-weight: 600; text-transform: capitalize; border-bottom: 4px solid #ff6f61; padding-bottom: 10px; letter-spacing: 0.5px;">
                Our Space
            </h3>
            <p style="font-size: 18px; margin-bottom: 40px; color: #555; line-height: 1.7;">
                Our modern yet cozy space is designed with comfort in mind. Whether it's a casual meal or a special celebration, we’ve created the perfect atmosphere for you to relax, enjoy, and create lasting memories.
            </p>
        
            <h3 style="font-size: 40px; color: #ff6f61; margin-bottom: 25px; font-weight: 600; text-transform: capitalize; border-bottom: 4px solid #ff6f61; padding-bottom: 10px; letter-spacing: 0.5px;">
                What Makes Us Unique
            </h3>
            <p style="font-size: 18px; margin-bottom: 40px; color: #555; line-height: 1.7;">
                We’re not just another restaurant. At Spice Bites, we offer unique dining experiences, seasonal specials, and vibrant community events. Whether you're craving a familiar favorite or seeking something adventurous, each dish is crafted to delight.
            </p>
        
            <h3 style="font-size: 40px; color: #ff6f61; margin-bottom: 25px; font-weight: 600; text-transform: capitalize; border-bottom: 4px solid #ff6f61; padding-bottom: 10px; letter-spacing: 0.5px;">
                Join Us!
            </h3>
            <p style="font-size: 20px; color: #333; text-align: center; margin-bottom: 30px; font-weight: 300;">
                Come visit Spice Bites and indulge in a dining experience like no other. We can’t wait to welcome you!
            </p>
            <a href="#contact" style="background-color: #ff6f61; color: white; padding: 12px 30px; text-transform: uppercase; font-size: 18px; border-radius: 50px; font-weight: 600; text-decoration: none; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); display: inline-block; margin-top: 20px; transition: background-color 0.3s, transform 0.3s;">
                Visit Us Now
            </a>
        </div>

        <!-- Admin Dashboard Section -->
        <div id="dashboard" class="content-section" style="display: none; padding: 60px; background: #f0f4f7; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);">
            <div id="dashboard-content" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                    <h1 style="font-size: 2.5rem; color: #ff6f61; margin: 0;">Admin Dashboard</h1>
                    <button id="logout-btn" style="background-color: #FF5733; color: white; padding: 12px 25px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: background-color 0.3s ease;">Logout</button>
                </div>
                
                <!-- Welcome Section -->
                <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-bottom: 30px;">
                    <h2 style="color: #333; margin-top: 0;">Welcome to the Admin Panel</h2>
                    <p style="color: #666; font-size: 1.1rem;">You are logged in as Administrator</p>
                    <p style="color: #666; font-size: 1rem;">From here you can manage your restaurant operations and monitor orders.</p>
                </div>
                
                <!-- Menu Items Section - EDITABLE -->
                <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-bottom: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #ff6f61; border-bottom: 3px solid #ff6f61; padding-bottom: 15px; margin: 0; flex: 1;">Menu Items Management</h2>
                        <button id="add-item-btn" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">+ Add Item</button>
                    </div>
                    <div id="admin-menu-items" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <!-- Menu items will be loaded here -->
                    </div>
                </div>
                
                <!-- Add/Edit Item Modal -->
                <div id="item-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background-color: rgba(0, 0, 0, 0.6); z-index: 10000; justify-content: center; align-items: center;">
                    <div style="background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); max-width: 500px; width: 90%;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 id="modal-title" style="margin: 0; color: #ff6f61;">Add New Item</h3>
                            <button id="close-modal-btn" style="background: transparent; border: none; font-size: 28px; color: #999; cursor: pointer;">&times;</button>
                        </div>
                        <form id="item-form" style="display: flex; flex-direction: column; gap: 15px;">
                            <input type="hidden" id="item-id" value="">
                            <input type="text" id="item-name" placeholder="Item Name" required style="padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                            <textarea id="item-description" placeholder="Item Description" style="padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; resize: vertical; min-height: 80px;"></textarea>
                            <input type="number" id="item-price" placeholder="Price" step="0.01" required style="padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                            <input type="url" id="item-image" placeholder="Image URL" style="padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
                            <div style="display: flex; gap: 10px;">
                                <button type="submit" style="flex: 1; background-color: #ff6f61; color: white; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Save Item</button>
                                <button type="button" id="delete-item-btn" style="display: none; background-color: #FF5733; color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Delete</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Order History Section -->
                <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                    <h2 style="color: #ff6f61; border-bottom: 3px solid #ff6f61; padding-bottom: 15px;">Recent Orders</h2>
                    <div id="admin-orders" style="margin-top: 20px;">
                        <!-- Orders will be loaded here -->
                    </div>
                </div>
            </div>
            
            <div id="login-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background-color: rgba(0, 0, 0, 0.8); display: flex; justify-content: center; align-items: center; z-index: 9999; backdrop-filter: blur(10px);">
                <div style="background-color: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); text-align: center; position: relative;">
                    <!-- Cross button -->
                    <button id="close-btn" style="position: absolute; top: 10px; right: 10px; background: transparent; border: none; font-size: 30px; color: #ff6f61; cursor: pointer;">&times;</button>
                    <h2 style="color: #ff6f61; margin-bottom: 20px;">Admin Login</h2>
                    <form method="POST" action="authenticate.php">
                        <input type="text" name="admin-username" placeholder="Username" required style="padding: 10px; margin-bottom: 15px; width: 100%; border-radius: 5px; border: 1px solid #ddd;">
                        <input type="password" name="admin-password" placeholder="Password" required style="padding: 10px; margin-bottom: 20px; width: 100%; border-radius: 5px; border: 1px solid #ddd;">
                        <button type="submit" name="login" style="background-color: #ff6f61; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; width: 100%;">Login</button>
                    </form>                    
                </div>
            </div>
        </div>
        
        <script>
            window.onload = function() {
                // Check if the admin is logged in
                if (sessionStorage.getItem('admin_logged_in') === 'true') {
                    document.getElementById('login-overlay').style.display = 'none';
                    document.getElementById('dashboard-content').style.display = 'block';
                    
                    // Load menu items and orders
                    loadAdminMenuItems();
                    loadAdminOrders();
                    
                    // Setup menu management handlers
                    setupMenuFormHandler();
                    setupMenuModalHandlers();
                } else {
                    document.getElementById('login-overlay').style.display = 'flex';
                    document.getElementById('dashboard-content').style.display = 'none';
                }
        
                // Close button functionality
                document.getElementById('close-btn').addEventListener('click', function() {
                    document.getElementById('login-overlay').style.display = 'none';
                    window.location.href = 'index.html'; 
                });
                
                // Logout button functionality
                const logoutBtn = document.getElementById('logout-btn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', function() {
                        // Clear session storage
                        sessionStorage.removeItem('admin_logged_in');
                        
                        // Show login overlay
                        document.getElementById('login-overlay').style.display = 'flex';
                        document.getElementById('dashboard-content').style.display = 'none';
                        
                        // Show notification
                        showNotification('✓ Logged out successfully!');
                    });
                }
            }
            
            // Setup menu modal handlers
            function setupMenuModalHandlers() {
                const addBtn = document.getElementById('add-item-btn');
                const closeModalBtn = document.getElementById('close-modal-btn');
                const deleteBtn = document.getElementById('delete-item-btn');
                const modal = document.getElementById('item-modal');
                
                if (addBtn) {
                    addBtn.addEventListener('click', addNewMenuItem);
                }
                
                if (closeModalBtn) {
                    closeModalBtn.addEventListener('click', function() {
                        modal.style.display = 'none';
                    });
                }
                
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', deleteMenuItem);
                }
                
                // Close modal when clicking outside
                if (modal) {
                    modal.addEventListener('click', function(e) {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                        }
                    });
                }
            }
            
            // Load menu items for admin dashboard
            function loadAdminMenuItems() {
                fetch('fetch_menu.php')
                    .then(response => response.text())
                    .then(data => {
                        const menuContainer = document.getElementById('admin-menu-items');
                        if (menuContainer) {
                            // Parse the HTML and convert to editable cards
                            const tempDiv = document.createElement('div');
                            tempDiv.innerHTML = data;
                            const items = tempDiv.querySelectorAll('[data-item-id]');
                            
                            let html = '';
                            items.forEach(item => {
                                const id = item.getAttribute('data-item-id');
                                const name = item.getAttribute('data-item-name');
                                const price = item.getAttribute('data-item-price');
                                const desc = item.getAttribute('data-item-desc');
                                const img = item.getAttribute('data-item-img');
                                
                                html += `
                                    <div style="background: white; border: 1px solid #eee; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: transform 0.3s;">
                                        <img src="${img}" alt="${name}" style="width: 100%; height: 150px; object-fit: cover;">
                                        <div style="padding: 15px;">
                                            <h4 style="margin: 0 0 5px 0; color: #333; font-size: 14px;">${name}</h4>
                                            <p style="margin: 0 0 10px 0; color: #666; font-size: 12px;">${desc.substring(0, 50)}...</p>
                                            <p style="margin: 0 0 15px 0; color: #ff6f61; font-weight: bold; font-size: 16px;">$${parseFloat(price).toFixed(2)}</p>
                                            <button onclick="editMenuItem(${id}, '${name}', '${desc}', ${price}, '${img}')" style="width: 100%; background-color: #2196F3; color: white; padding: 8px; border: none; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold;">Edit</button>
                                        </div>
                                    </div>
                                `;
                            });
                            menuContainer.innerHTML = html || '<p style="color: #999;">No items found</p>';
                        }
                    })
                    .catch(error => {
                        console.error('Error loading menu items:', error);
                        document.getElementById('admin-menu-items').innerHTML = '<p style="color: #999;">Failed to load menu items</p>';
                    });
            }
            
            // Edit menu item
            function editMenuItem(id, name, desc, price, img) {
                document.getElementById('item-id').value = id;
                document.getElementById('item-name').value = name;
                document.getElementById('item-description').value = desc;
                document.getElementById('item-price').value = price;
                document.getElementById('item-image').value = img;
                document.getElementById('modal-title').textContent = 'Edit Item';
                document.getElementById('delete-item-btn').style.display = 'block';
                document.getElementById('item-modal').style.display = 'flex';
            }
            
            // Add new menu item
            function addNewMenuItem() {
                document.getElementById('item-id').value = '';
                document.getElementById('item-name').value = '';
                document.getElementById('item-description').value = '';
                document.getElementById('item-price').value = '';
                document.getElementById('item-image').value = '';
                document.getElementById('modal-title').textContent = 'Add New Item';
                document.getElementById('delete-item-btn').style.display = 'none';
                document.getElementById('item-modal').style.display = 'flex';
            }
            
            // Handle form submission
            function setupMenuFormHandler() {
                const form = document.getElementById('item-form');
                if (!form) return;
                
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const id = document.getElementById('item-id').value;
                    const name = document.getElementById('item-name').value;
                    const description = document.getElementById('item-description').value;
                    const price = document.getElementById('item-price').value;
                    const image_url = document.getElementById('item-image').value;
                    
                    const formData = new FormData();
                    formData.append('name', name);
                    formData.append('description', description);
                    formData.append('price', price);
                    formData.append('image_url', image_url);
                    
                    let url = 'manage_menu.php?action=add';
                    if (id) {
                        url = 'manage_menu.php?action=edit';
                        formData.append('id', id);
                    }
                    
                    fetch(url, {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            showNotification('✓ ' + (id ? 'Item updated' : 'Item added') + ' successfully!');
                            document.getElementById('item-modal').style.display = 'none';
                            loadAdminMenuItems();
                        } else {
                            alert('Error: ' + (data.error || 'Unknown error'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error saving item');
                    });
                });
            }
            
            // Delete menu item
            function deleteMenuItem() {
                const id = document.getElementById('item-id').value;
                if (!id) return;
                
                if (confirm('Are you sure you want to delete this item?')) {
                    const formData = new FormData();
                    formData.append('id', id);
                    
                    fetch('manage_menu.php?action=delete', {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            showNotification('✓ Item deleted successfully!');
                            document.getElementById('item-modal').style.display = 'none';
                            loadAdminMenuItems();
                        } else {
                            alert('Error: ' + (data.error || 'Unknown error'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error deleting item');
                    });
                }
            }
            
            // Load order history for admin dashboard
            function loadAdminOrders() {
                fetch('fetch_order_history.php')
                    .then(response => response.json())
                    .then(data => {
                        const ordersContainer = document.getElementById('admin-orders');
                        if (!ordersContainer) return;
                        
                        if (data.length === 0) {
                            ordersContainer.innerHTML = '<p style="color: #999; text-align: center;">No orders yet</p>';
                            return;
                        }
                        
                        // Group orders by order_id
                        const ordersMap = {};
                        data.forEach(item => {
                            if (!ordersMap[item.order_id]) {
                                ordersMap[item.order_id] = {
                                    order_id: item.order_id,
                                    customer_name: item.customer_name,
                                    email: item.email,
                                    address: item.address,
                                    phone_number: item.phone_number,
                                    order_date: item.order_date,
                                    items: []
                                };
                            }
                            ordersMap[item.order_id].items.push({
                                name: item.item_name,
                                price: item.item_price
                            });
                        });
                        
                        let html = '<table style="width: 100%; border-collapse: collapse;">';
                        html += '<thead style="background-color: #f5f5f5;">';
                        html += '<tr style="border-bottom: 2px solid #ff6f61;">';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Order ID</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Customer</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Email</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Address</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Phone</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Items</th>';
                        html += '<th style="padding: 12px; text-align: left; color: #333;">Date</th>';
                        html += '</tr>';
                        html += '</thead>';
                        html += '<tbody>';

                        Object.values(ordersMap).forEach(order => {
                            const itemsList = order.items.map(item => `${item.name} ($${parseFloat(item.price).toFixed(2)})`).join(', ');
                            const orderDate = new Date(order.order_date).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'short',
                                day: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                            });

                            html += '<tr style="border-bottom: 1px solid #eee;">';
                            html += `<td style="padding: 12px; color: #333;">#${order.order_id}</td>`;
                            html += `<td style="padding: 12px; color: #333;">${order.customer_name}</td>`;
                            html += `<td style="padding: 12px; color: #666;">${order.email}</td>`;
                            html += `<td style="padding: 12px; color: #666;">${order.address}</td>`;
                            html += `<td style="padding: 12px; color: #666;">${order.phone_number}</td>`;
                            html += `<td style="padding: 12px; color: #666;">${itemsList}</td>`;
                            html += `<td style="padding: 12px; color: #666;">${orderDate}</td>`;
                            html += '</tr>';
                        });
                        
                        html += '</tbody></table>';
                        ordersContainer.innerHTML = html;
                    })
                    .catch(error => {
                        console.error('Error loading orders:', error);
                        document.getElementById('admin-orders').innerHTML = '<p style="color: #999;">Failed to load orders</p>';
                    });
            }
        </script>
        
        
            
        </div>
</body>

</html>